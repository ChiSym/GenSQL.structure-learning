schema: '2.0'
stages:
  subsample:
    cmd: "mkdir -p data/test && python scripts/subsample.py --data data/data.csv --test-data-dir\
      \ data/test --params params.yaml --output data/subsampled.csv\n"
    deps:
    - path: data/data.csv
      md5: f43a7238017f2ad295a5bfec56933248
      size: 8136977
    - path: scripts/subsample.py
      md5: e984c015340dc2e50d926b4e3931b9dd
      size: 1821
    params:
      params.yaml:
        seed: 42
        sub_sample:
          according_to_columns:
            Org_size:
            - 10,000 or more employees
          N: 6000
    outs:
    - path: data/subsampled.csv
      md5: 104756a17b05fcae61db02a7acfdba39
      size: 5810128
    - path: data/test
      md5: d9a6553d279e92388f78ec7867329b0c.dir
      size: 2332391
      nfiles: 2
  validate-column-names:
    cmd: bin/validate.sh
    deps:
    - path: data/subsampled.csv
      md5: 104756a17b05fcae61db02a7acfdba39
      size: 5810128
    outs:
    - path: data/validated.csv
      md5: 104756a17b05fcae61db02a7acfdba39
      size: 5810128
  nullify:
    cmd: "clojure -X inferenceql.auto-modeling.main/nullify < data/validated.csv >\
      \ data/nullified.csv\n"
    deps:
    - path: data/validated.csv
      md5: 104756a17b05fcae61db02a7acfdba39
      size: 5810128
    params:
      params.yaml:
        nullify:
    outs:
    - path: data/nullified.csv
      md5: 104756a17b05fcae61db02a7acfdba39
      size: 5810128
  guess-schema:
    cmd: "clojure -X inferenceql.auto-modeling.main/guess-schema < data/nullified.csv\
      \ > data/schema.edn\n"
    deps:
    - path: data/nullified.csv
      md5: 104756a17b05fcae61db02a7acfdba39
      size: 5810128
    params:
      params.yaml:
        schema:
          Salary_USD: numerical
          Work_experience: numerical
          Years_coding: numerical
          Years_coding_professionally: numerical
          Org_size: ignore
    outs:
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
  cgpm-schema:
    cmd: "clojure -X inferenceql.auto-modeling.main/cgpm-schema < data/schema.edn\
      \ > data/cgpm-schema.edn\n"
    deps:
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    outs:
    - path: data/cgpm-schema.edn
      md5: def04f6cf1eaeda488575d8cb0c8c229
      size: 6618
  loom-schema:
    cmd: "clojure -X inferenceql.auto-modeling.main/loom-schema < data/schema.edn\
      \ > data/loom-schema.json\n"
    deps:
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    outs:
    - path: data/loom-schema.json
      md5: 56542d2ea7040f0c278ac7de0eaeb718
      size: 4367
  ignore:
    cmd: "clojure -X inferenceql.auto-modeling.main/ignore :schema '\"data/schema.edn\"\
      ' < data/nullified.csv > data/ignored.csv\n"
    deps:
    - path: data/nullified.csv
      md5: 104756a17b05fcae61db02a7acfdba39
      size: 5810128
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    outs:
    - path: data/ignored.csv
      md5: 3c70752fa37400ff1c47fd32479b1ff6
      size: 5682141
  numericalize:
    cmd: "clojure -X inferenceql.auto-modeling.main/numericalize :schema '\"data/schema.edn\"\
      ' :table data/mapping-table.edn < data/ignored.csv > data/numericalized.csv\n"
    deps:
    - path: data/ignored.csv
      md5: 3c70752fa37400ff1c47fd32479b1ff6
      size: 5682141
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    outs:
    - path: data/mapping-table.edn
      md5: 4c4d79065bc45fdfd25bad1987827129
      size: 10274
    - path: data/numericalized.csv
      md5: 34d3a8cf4fd9a8b24cdec00afdb5b620
      size: 2790707
  loom-ingest:
    cmd: ./bin/loom_task ingest loom data/loom-schema.json data/numericalized.csv
    deps:
    - path: data/loom-schema.json
      md5: 56542d2ea7040f0c278ac7de0eaeb718
      size: 4367
    - path: data/numericalized.csv
      md5: 34d3a8cf4fd9a8b24cdec00afdb5b620
      size: 2790707
    outs:
    - path: loom/ingest
      md5: a66a60310b8464f854bb80285028f0da.dir
      size: 789946
      nfiles: 7
    - path: loom/query
      md5: 6a59fa4a6d412fbb9b15e20055dba065.dir
      size: 106
      nfiles: 1
  loom-infer-config:
    cmd: "clojure -X inferenceql.auto-modeling.main/infer-config < params.yaml > data/infer-config.json\n"
    params:
      params.yaml:
        loom.extra_passes: 100
        seed: 42
    outs:
    - path: data/infer-config.json
      md5: 70b4dd42c4dfdfa83918a045e7078ab9
      size: 43
  loom-infer:
    cmd: ./bin/loom_task infer loom $(bin/param sample_count) data/infer-config.json
    deps:
    - path: data/infer-config.json
      md5: 70b4dd42c4dfdfa83918a045e7078ab9
      size: 43
    - path: loom/ingest
      md5: a66a60310b8464f854bb80285028f0da.dir
      size: 789946
      nfiles: 7
    - path: loom/query
      md5: 6a59fa4a6d412fbb9b15e20055dba065.dir
      size: 106
      nfiles: 1
    params:
      params.yaml:
        sample_count: 60
    outs:
    - path: loom/samples
      md5: 1ad5699f9db4d635f4c71a5ce319f8d0.dir
      size: 45759104
      nfiles: 936
  loom-dump-metadata:
    cmd: "mkdir -p data/cgpm/raw && find loom/samples -mindepth 1 -maxdepth 1 -type\
      \ d | parallel $(bin/param parallel.flags) ./bin/loom python scripts/loom_dump.py\
      \ {} --output data/cgpm/raw/{/}.json\n"
    deps:
    - path: loom/samples
      md5: 1ad5699f9db4d635f4c71a5ce319f8d0.dir
      size: 45759104
      nfiles: 936
    - path: scripts/loom_dump.py
      md5: c43616fe12258e9314fe1b481a6971e8
      size: 1978
    params:
      params.yaml:
        parallel.flags: --verbose
    outs:
    - path: data/cgpm/raw
      md5: 1108a66d5435ed37ac05f8b0fd474084.dir
      size: 11020131
      nfiles: 60
  cgpm-hydrate-metadata:
    cmd: "find data/cgpm/raw -type f | parallel jsonschema --instance {} schemas/cgpm.json\
      \ && mkdir -p data/cgpm/hydrated && rm -f data/cgpm/inf.log && find data/cgpm/raw\
      \ -type f | sort | parallel $(bin/param parallel.flags) 'python scripts/cgpm_hydrate.py\
      \ --metadata {} --output data/cgpm/hydrated/{/} --data data/numericalized.csv\
      \ --schema data/cgpm-schema.edn --mapping-table data/mapping-table.edn --seed\
      \ $(($(bin/param seed) + {#} - 1))'\n"
    deps:
    - path: data/cgpm-schema.edn
      md5: def04f6cf1eaeda488575d8cb0c8c229
      size: 6618
    - path: data/cgpm/raw
      md5: 1108a66d5435ed37ac05f8b0fd474084.dir
      size: 11020131
      nfiles: 60
    - path: data/mapping-table.edn
      md5: 4c4d79065bc45fdfd25bad1987827129
      size: 10274
    - path: data/numericalized.csv
      md5: 34d3a8cf4fd9a8b24cdec00afdb5b620
      size: 2790707
    - path: schemas/cgpm.json
      md5: 75fb21013e98a73e03fbe1ace14426f2
      size: 4039
    - path: scripts/cgpm_hydrate.py
      md5: 0ad32ff550f8b45a3642bddf279c9664
      size: 2971
    params:
      params.yaml:
        parallel.flags: --verbose
        seed: 42
    outs:
    - path: data/cgpm/hydrated
      md5: 07f68a36e88eb5ff04ee616249b89158.dir
      size: 450492453
      nfiles: 60
  cgpm-infer-hyperparameters:
    cmd: "find data/cgpm/hydrated -type f | parallel jsonschema --instance {} schemas/cgpm.json\
      \ && mkdir -p data/cgpm/complete && echo $(bin/param cgpm.minutes) >> data/cgpm/inf.log\
      \ && find data/cgpm/hydrated -type f | sort | parallel $(bin/param parallel.flags)\
      \ 'python scripts/cgpm_infer.py {} --kernel alpha --kernel view_alphas --kernel\
      \ column_hypers --kernel rows --kernel columns --output data/cgpm/complete/{/}\
      \ --data data/numericalized.csv --params params.yaml --seed $(($(bin/param seed)\
      \ + {#} - 1)) --minutes $(bin/param cgpm.minutes)' #--iterations $(bin/param\
      \ cgpm.iterations)\n"
    deps:
    - path: data/cgpm/hydrated
      md5: 07f68a36e88eb5ff04ee616249b89158.dir
      size: 450492453
      nfiles: 60
    - path: data/numericalized.csv
      md5: 34d3a8cf4fd9a8b24cdec00afdb5b620
      size: 2790707
    - path: schemas/cgpm.json
      md5: 75fb21013e98a73e03fbe1ace14426f2
      size: 4039
    - path: scripts/cgpm_infer.py
      md5: 8c953870a8ac391bb77deeb105403131
      size: 4523
    params:
      params.yaml:
        cgpm:
          minutes: 1440
        parallel.flags: --verbose
        seed: 42
    outs:
    - path: data/cgpm/complete
      md5: 8f18855c72418e27f856675830c9c316.dir
      size: 440105624
      nfiles: 60
  ast-export:
    cmd:
    - 'parallel --verbose jsonschema --instance {} schemas/cgpm.json :::: <(find data/cgpm/complete
      -type f)'
    - mkdir -p data/ast
    - "parallel --verbose 'python scripts/ast_export.py --metadata {} --data data/numericalized.csv\
      \ --mapping-table data/mapping-table.edn --output data/ast/{/.}.edn' :::: <(find\
      \ data/cgpm/complete -type f)"
    deps:
    - path: data/cgpm/complete
      md5: 8f18855c72418e27f856675830c9c316.dir
      size: 440105624
      nfiles: 60
    - path: data/ignored.csv
      md5: 3c70752fa37400ff1c47fd32479b1ff6
      size: 5682141
    - path: scripts/ast_export.py
      md5: 573cc404efd53361edc764e5c517ee8e
      size: 11046
    params:
      params.yaml:
        parallel.flags: --verbose
    outs:
    - path: data/ast
      md5: 71ab346573b142d3fc22b4d72986e1bd.dir
      size: 115354937
      nfiles: 60
  save-max-number-views:
    cmd: "find data/cgpm/complete -type f | xargs python scripts/save_n_views.py >>\
      \ data/max-number-views.txt\n"
    deps:
    - path: data/cgpm/complete
      md5: 8f18855c72418e27f856675830c9c316.dir
      size: 440105624
      nfiles: 60
    outs:
    - path: data/max-number-views.txt
      md5: 9bf31c7ff062936a96d3c8bd1f8f2ff3
      size: 2
  sppl-import:
    cmd:
    - mkdir -p data/sppl/unmerged
    - "parallel --verbose 'python scripts/sppl_import.py --multi-mix-ast {} --max-number-views\
      \ data/max-number-views.txt --output data/sppl/unmerged/{/.}.json' :::: <(find\
      \ data/ast -type f)"
    deps:
    - path: data/ast
      md5: 71ab346573b142d3fc22b4d72986e1bd.dir
      size: 115354937
      nfiles: 60
    - path: data/max-number-views.txt
      md5: 9bf31c7ff062936a96d3c8bd1f8f2ff3
      size: 2
    - path: scripts/sppl_import.py
      md5: 60da181980209f224dd1ed4f8b92c57e
      size: 4743
    params:
      params.yaml:
        parallel.flags: --verbose
    outs:
    - path: data/sppl/unmerged
      md5: f24e2ff7ceacdeab8c5337de388f282b.dir
      size: 58925853
      nfiles: 60
  sppl-merge:
    cmd: "find data/sppl/unmerged -type f | sort | xargs python scripts/sppl_merge.py\
      \ --output data/sppl/merged.json\n"
    deps:
    - path: data/sppl/unmerged
      md5: f24e2ff7ceacdeab8c5337de388f282b.dir
      size: 58925853
      nfiles: 60
    outs:
    - path: data/sppl/merged.json
      md5: 88cfb7d421c75dd46f1aedf61c1d9e8a
      size: 58932129
  sppl-sample:
    cmd: "python scripts/sppl_sample.py --model data/sppl/merged.json --data data/ignored.csv\
      \ --sample_count $(bin/param qc.sample_count) > data/synthetic-data-iql.csv\n"
    deps:
    - path: data/ignored.csv
      md5: 3c70752fa37400ff1c47fd32479b1ff6
      size: 5682141
    - path: data/sppl/merged.json
      md5: 88cfb7d421c75dd46f1aedf61c1d9e8a
      size: 58932129
    - path: scripts/sppl_sample.py
      md5: 65c711874e0eda0e7d79b4a4a3eb6076
      size: 1843
    outs:
    - path: data/synthetic-data-iql.csv
      md5: 73e5ab3eb16b9430d067eb3dd1cc32c6
      size: 6297321
  save-linear-stats:
    cmd: "python scripts/linear_stats.py --data data/ignored.csv --schema data/schema.edn\
      \ --output data/linear-stats.json\n"
    deps:
    - path: data/ignored.csv
      md5: 3c70752fa37400ff1c47fd32479b1ff6
      size: 5682141
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    - path: scripts/linear_stats.py
      md5: 945c9c9f023d29e57fa88384650cfbf9
      size: 4460
    outs:
    - path: data/linear-stats.json
      md5: d2fed9a567ccd0e5ba3aff5ff9ae1069
      size: 4414556
  save-dependencies:
    cmd: "find data/cgpm/complete -type f | sort | xargs python scripts/dep_prob.py\
      \ --data data/numericalized.csv --output data/dep-prob.json\n"
    deps:
    - path: data/cgpm/complete
      md5: 8f18855c72418e27f856675830c9c316.dir
      size: 440105624
      nfiles: 60
    outs:
    - path: data/dep-prob.json
      md5: ff3566244fa2154f6a67743e5b0b7e04
      size: 1418352
  linear-stats-vl:
    cmd: "clojure -X inferenceql.auto-modeling.heatmap/vega-lite :stats-path '\"data/linear-stats.json\"\
      ' :sort-path '\"data/dep-prob.json\"' :domain '[1.0 0.0]' :default 0.0 :name\
      \ '\"statistics\"' :field '\"p-value\"' :scheme '\"oranges\"' > data/linear-stats.vl.json\n"
    deps:
    - path: data/dep-prob.json
      md5: ff3566244fa2154f6a67743e5b0b7e04
      size: 1418352
    - path: data/linear-stats.json
      md5: d2fed9a567ccd0e5ba3aff5ff9ae1069
      size: 4414556
    - path: src/inferenceql/auto_modeling/heatmap.clj
      md5: f4f14b20f34f2f09c76dff87a7e908ee
      size: 7364
    outs:
    - path: data/linear-stats.vl.json
      md5: 80d837c4d70e4cd2224b97e1e57dc133
      size: 3985248
  linear-stats-vg:
    cmd: "pnpm vl2vg < data/linear-stats.vl.json > data/linear-stats.vg.json\n"
    deps:
    - path: data/linear-stats.vl.json
      md5: 80d837c4d70e4cd2224b97e1e57dc133
      size: 3985248
    outs:
    - path: data/linear-stats.vg.json
      md5: 2c5bf46a2d7b98b4b50bb17251c2f1fc
      size: 4002704
  compare-dep-prob-with-linear:
    cmd: "python scripts/compare_deps.py --deps data/dep-prob.json --linear data/linear-stats.json\
      \ >> data/qc-statistical-tests.txt\n"
    deps:
    - path: data/dep-prob.json
      md5: ff3566244fa2154f6a67743e5b0b7e04
      size: 1418352
    - path: data/linear-stats.json
      md5: d2fed9a567ccd0e5ba3aff5ff9ae1069
      size: 4414556
    outs:
    - path: data/qc-statistical-tests.txt
      md5: fc20cc174ef35640605bd0b824521adf
      size: 405706
  qc-tag-samples:
    cmd: "clojure -X inferenceql.auto-modeling.qc.samples/tag :data data/ignored.csv\
      \ :samples-synthetic data/synthetic-data-iql.csv > qc/samples/samples.edn\n"
    deps:
    - path: data/ignored.csv
      md5: 3c70752fa37400ff1c47fd32479b1ff6
      size: 5682141
    - path: data/synthetic-data-iql.csv
      md5: 73e5ab3eb16b9430d067eb3dd1cc32c6
      size: 6297321
    - path: src/inferenceql/auto_modeling/qc/samples.clj
      md5: 5c0fcc265aabd819c96ae861bdff7587
      size: 1100
    outs:
    - path: qc/samples/samples.edn
      md5: 369f5f299ed42a1132405514b9a2467e
      size: 60681050
  qc-dashboard-spec:
    cmd: "clojure -X inferenceql.auto-modeling.qc.dashboard/spec :samples qc/samples/samples.edn\
      \ :schema data/schema.edn :correlation data/linear-stats.json > qc/specs/qc-dashboard.vl.json\n"
    deps:
    - path: data/linear-stats.json
      md5: d2fed9a567ccd0e5ba3aff5ff9ae1069
      size: 4414556
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    - path: qc/samples/samples.edn
      md5: 369f5f299ed42a1132405514b9a2467e
      size: 60681050
    - path: src/inferenceql/auto_modeling/qc/dashboard.clj
      md5: ceae831bc1ad605ca51069128772ed31
      size: 24673
    - path: src/inferenceql/auto_modeling/qc/util.clj
      md5: 3f010451e4a984ba25520fd9c3b36654
      size: 3975
    params:
      params.yaml:
        qc.columns:
    outs:
    - path: qc/specs/qc-dashboard.vl.json
      md5: 4f5cbf458844ab031769d3b6bb1427d6
      size: 69010032
  qc-dashboard-app:
    cmd: "clojure -X inferenceql.auto-modeling.qc.app/create :template qc/templates/index.html\
      \ :spec qc/specs/qc-dashboard.vl.json :renderer canvas :title '\"QC dashboard\"\
      ' > qc/app/qc-dashboard.html\n"
    deps:
    - path: qc/specs/qc-dashboard.vl.json
      md5: 4f5cbf458844ab031769d3b6bb1427d6
      size: 69010032
    - path: qc/templates/index.html
      md5: ac51efb107febc1caf14b5e2c6d0489d
      size: 1685
    - path: src/inferenceql/auto_modeling/qc/app.clj
      md5: 9d4c0718ef4e415b3a8a82bf707296eb
      size: 519
    outs:
    - path: qc/app/qc-dashboard.html
      md5: 1d11c0326e7178fc1d2ffa77117a4441
      size: 69011706
  dep-prob-vl:
    cmd: "clojure -X inferenceql.auto-modeling.heatmap/vega-lite :stats-path '\"data/dep-prob.json\"\
      ' :domain '[0.0 1.0]' :default 1.0 :name '\"crosscat\"' :scheme '\"blues\"'\
      \ > data/dep-prob.vl.json\n"
    deps:
    - path: data/dep-prob.json
      md5: ff3566244fa2154f6a67743e5b0b7e04
      size: 1418352
    - path: src/inferenceql/auto_modeling/heatmap.clj
      md5: f4f14b20f34f2f09c76dff87a7e908ee
      size: 7364
    outs:
    - path: data/dep-prob.vl.json
      md5: 8ee047d9ef27916f6efaa5e32fc1a5d0
      size: 3459168
  dep-prob-vg:
    cmd: "pnpm vl2vg < data/dep-prob.vl.json > data/dep-prob.vg.json\n"
    deps:
    - path: data/dep-prob.vl.json
      md5: 8ee047d9ef27916f6efaa5e32fc1a5d0
      size: 3459168
    outs:
    - path: data/dep-prob.vg.json
      md5: f0d7638acdb6fb6c1aff131a7ea7ad9f
      size: 3435119
  dep-prob-svg:
    cmd: "pnpm vg2svg < data/dep-prob.vg.json > data/dep-prob.svg\n"
    deps:
    - path: data/dep-prob.vg.json
      md5: f0d7638acdb6fb6c1aff131a7ea7ad9f
      size: 3435119
    outs:
    - path: data/dep-prob.svg
      md5: 9570638cd1185cf9b158b44031b5e8b2
      size: 9683594
  qc-splom-spec:
    cmd: "clojure -X inferenceql.auto-modeling.qc.splom/spec :samples qc/samples/samples.edn\
      \ :schema data/schema.edn :correlation data/linear-stats.json > qc/specs/qc-splom.vl.json\n"
    deps:
    - path: data/linear-stats.json
      md5: d2fed9a567ccd0e5ba3aff5ff9ae1069
      size: 4414556
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    - path: qc/samples/samples.edn
      md5: 369f5f299ed42a1132405514b9a2467e
      size: 60681050
    - path: src/inferenceql/auto_modeling/qc/splom.clj
      md5: 739b58b1607577931865aae958121b67
      size: 10862
    - path: src/inferenceql/auto_modeling/qc/util.clj
      md5: 3f010451e4a984ba25520fd9c3b36654
      size: 3975
    params:
      params.yaml:
        qc.columns:
    outs:
    - path: qc/specs/qc-splom.vl.json
      md5: 0c701d668915cc742b61149c9cf54af1
      size: 68985175
  linear-stats-svg:
    cmd: "pnpm vg2svg < data/linear-stats.vg.json > data/linear-stats.svg\n"
    deps:
    - path: data/linear-stats.vg.json
      md5: 2c5bf46a2d7b98b4b50bb17251c2f1fc
      size: 4002704
    outs:
    - path: data/linear-stats.svg
      md5: fa88aee593c3fe85d0f6139f4599e109
      size: 10040727
  predict:
    cmd: "python scripts/predict.py --schema data/schema.edn --training data/ignored.csv\
      \ --training data/synthetic-data-iql.csv --test data/test/test.csv --output\
      \ data/predictions.csv #--test data/test/test-shifted.csv\n"
    deps:
    - path: data/ignored.csv
      md5: 3c70752fa37400ff1c47fd32479b1ff6
      size: 5682141
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    - path: data/synthetic-data-iql.csv
      md5: 73e5ab3eb16b9430d067eb3dd1cc32c6
      size: 6297321
    - path: data/test/test.csv
      md5: 4858a227e6aedbc7c971722bda02ad17
      size: 520634
    - path: scripts/predict.py
      md5: 465e872cc1a43aec563bd45fa163c456
      size: 7403
    params:
      params.yaml:
        synthetic_data_evaluation:
          target: Salary_USD
          predictor: Random_forest
    outs:
    - path: data/predictions.csv
      md5: daf2093124700ed8dbd516518c0840c9
      size: 73471
  qc-splom-app:
    cmd: "clojure -X inferenceql.auto-modeling.qc.app/create :template qc/templates/index.html\
      \ :spec qc/specs/qc-splom.vl.json :renderer canvas :title '\"QC scatter plot\
      \ matrix\"' > qc/app/qc-splom.html\n"
    deps:
    - path: qc/specs/qc-splom.vl.json
      md5: 0c701d668915cc742b61149c9cf54af1
      size: 68985175
    - path: qc/templates/index.html
      md5: ac51efb107febc1caf14b5e2c6d0489d
      size: 1685
    - path: src/inferenceql/auto_modeling/qc/app.clj
      md5: 9d4c0718ef4e415b3a8a82bf707296eb
      size: 519
    outs:
    - path: qc/app/qc-splom.html
      md5: 35e726ffc151bb36d9355836ae58113e
      size: 68986859
  xcat-complete-import:
    cmd:
    - mkdir -p data/xcat/complete/
    - "parallel --verbose 'clojure -X inferenceql.auto-modeling.xcat/import :cgpm-json\
      \ {} :data-csv data/ignored.csv :mapping-table data/mapping-table.edn :numericalized-csv\
      \ data/numericalized.csv :schema-edn data/schema.edn > data/xcat/complete/{/.}.edn'\
      \ :::: <(find data/cgpm/complete -type f)"
    deps:
    - path: data/cgpm/complete
      md5: 8f18855c72418e27f856675830c9c316.dir
      size: 440105624
      nfiles: 60
    - path: data/ignored.csv
      md5: 3c70752fa37400ff1c47fd32479b1ff6
      size: 5682141
    - path: data/mapping-table.edn
      md5: 4c4d79065bc45fdfd25bad1987827129
      size: 10274
    - path: data/numericalized.csv
      md5: 34d3a8cf4fd9a8b24cdec00afdb5b620
      size: 2790707
    - path: data/schema.edn
      md5: 1809ada97d5d44e44f62a975adbdcb2d
      size: 5527
    - path: src/inferenceql/auto_modeling/xcat.clj
      md5: dc5d691d8f3cd744340cb3c2168a7050
      size: 4629
    params:
      params.yaml:
        parallel.flags: --verbose
    outs:
    - path: data/xcat/complete/
      md5: bcba6e1c64f35ad4f17cdf0a3b156701.dir
      size: 2227946477
      nfiles: 60
  assemble-database:
    cmd: "clojure -M:exec inferenceql.auto-modeling.main assemble-database --table-name\
      \ $(bin/param database.table_name) --table-path $(bin/param database.table_path)\
      \ --model-name $(bin/param database.model_name) --model-path $(bin/param database.model_path)\
      \ > data/db.edn\n"
    deps:
    - path: data/cgpm
      md5: c248ca134c3ac391c373358b587966e4.dir
      size: 901618208
      nfiles: 180
    - path: data/nullified.csv
      md5: 104756a17b05fcae61db02a7acfdba39
      size: 5810128
    - path: data/xcat
      md5: f330a04466e4d621ea126fcc0c5abcc9.dir
      size: 2227946487
      nfiles: 61
    params:
      params.yaml:
        database.model_name: baseline_model
        database.model_path: data/xcat/complete/sample.0.edn
        database.table_name: data
        database.table_path: data/nullified.csv
    outs:
    - path: data/db.edn
      md5: bffa15cdac4ad757e4627c89ee53af13
      size: 60923364
