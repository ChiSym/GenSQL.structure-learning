#!/bin/bash

# This script needs be run within the 'devenv shell' environment

TD=/home/ubuntu/cesql			# Structure Learning Directory
DD=${TD}/privacy/binary			# Binary-ized data directories

if [ -z "${1}" ]; then
    echo "Usage: ${0} <directory name in ${DD}/>"
    exit 1
fi

if [ -z "${DEVENV_ROOT}" ]; then
    echo "You must execute 'devenv shell' in ${TD} before running this script"
    exit 1
fi

DD="${DD}/${1}"

if [ ! -d "${DD}" ]; then
    echo "Unable to find data directory ${DD}"
    exit 1
fi

pushd ${TD} >/dev/null
python scripts/predict.py				\
        --schema ${DD}/schema.edn			\
        --training ${DD}/ignored.csv			\
        --training ${DD}/synthetic-data-iql.csv		\
        --test ${DD}/test.csv				\
        --output ${DD}/predictions.csv
popd >/dev/null
